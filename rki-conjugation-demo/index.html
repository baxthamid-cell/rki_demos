<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DEMO: –¢—Ä–µ–Ω–∞–∂—ë—Ä-—Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä –†–ö–ò - –°–ø—Ä—è–∂–µ–Ω–∏–µ –≥–ª–∞–≥–æ–ª–æ–≤</title>
    <style>
        :root { 
            --bg: linear-gradient(135deg, #FF6347, #DDA0DD, #FFF44F); 
            --btn: linear-gradient(180deg, #6c5ce7, #a29bfe); 
            --btn-green: linear-gradient(180deg, #00b894, #55efc4);
            --btn-orange: linear-gradient(180deg, #fd79a8, #fab1a0);
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body { 
            font-family: 'Arial', sans-serif; 
            background: var(--bg); 
            margin: 0; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            min-height: 100vh; 
            padding: 15px;
        }
        
        #app { 
            width: 100%; 
            max-width: 850px; 
            background: #fff; 
            border-radius: 20px; 
            padding: 35px; 
            text-align: center; 
            border: 3px solid #6c5ce7; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.2); 
            position: relative;
        }

        #app::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 17px;
            padding: 10px;
            background: linear-gradient(to right, 
                rgba(30, 144, 255, 0.3) 0%, 
                rgba(135, 206, 250, 0.1) 10px, 
                transparent 10px, 
                transparent calc(100% - 10px), 
                rgba(135, 206, 250, 0.1) calc(100% - 10px), 
                rgba(30, 144, 255, 0.3) 100%),
            linear-gradient(to bottom, 
                rgba(30, 144, 255, 0.3) 0%, 
                rgba(135, 206, 250, 0.1) 10px, 
                transparent 10px, 
                transparent calc(100% - 10px), 
                rgba(135, 206, 250, 0.1) calc(100% - 10px), 
                rgba(30, 144, 255, 0.3) 100%);
            -webkit-mask: 
                linear-gradient(#fff 0 0) content-box, 
                linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            pointer-events: none;
        }
        
        .screen { display: none; } 
        .active { display: block; animation: zoom 0.3s; }
        
        @keyframes zoom { 
            from { transform: scale(0.9); opacity: 0; } 
            to { transform: scale(1); opacity: 1; } 
        }

        @keyframes bounceIn {
            0% { transform: translateX(-50%) scale(0); }
            50% { transform: translateX(-50%) scale(1.2); }
            100% { transform: translateX(-50%) scale(1); }
        }

        @keyframes rotateIn {
            0% { transform: rotate(0deg) scale(0); }
            100% { transform: rotate(360deg) scale(1); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        
        h1 { color: #333; margin-bottom: 15px; font-size: 28px; }
        h2 { color: #6c5ce7; margin: 20px 0; }
        h3 { color: #FF6347; margin: 15px 0 8px 0; font-size: 18px; }
        
        .author-info {
            text-align: center;
            color: #666;
            font-size: 13px;
            margin: 15px 0;
            font-style: italic;
            border-top: 1px solid #eee;
            padding-top: 12px;
        }
        
        .btn { 
            color: #fff; 
            border: none; 
            padding: 15px 25px; 
            border-radius: 15px; 
            font-size: 1.1rem; 
            font-weight: bold; 
            cursor: pointer; 
            margin: 8px 5px; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.1); 
            transition: 0.2s; 
            text-decoration: none; 
            display: inline-block;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.15);
        }
        
        .b-main { background: var(--btn); }
        .b-green { background: var(--btn-green); }
        .b-uz { background: var(--btn-orange); }
        
        .level-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 12px;
            margin: 20px 0;
        }
        
        .question-text {
            font-size: 26px;
            line-height: 1.6;
            margin: 25px 0;
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            justify-content: center;
            gap: 8px;
        }

        .blank-space {
            display: inline-block;
            min-width: 150px;
            height: 40px;
            border: 2px solid #E0E0E0;
            border-radius: 8px;
            margin: 0 5px;
            position: relative;
            vertical-align: middle;
            transition: all 0.3s ease;
        }

        .blank-space:hover {
            border-color: #4CAF50;
            background: #f0f8f0;
        }

        .answer-content {
            display: inline-flex;
            align-items: baseline;
            position: relative;
            padding: 5px 10px;
            line-height: 30px;
        }

        .verb-stem {
            color: #000;
            font-weight: normal;
        }

        .verb-ending {
            color: #FF0000;
            font-weight: bold;
            position: relative;
        }

        .checkmark {
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 24px;
            animation: bounceIn 0.5s ease;
        }

        .star {
            margin-left: 8px;
            font-size: 20px;
            animation: rotateIn 0.5s ease;
        }
        
        .options { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); 
            gap: 12px; 
            margin: 20px 0; 
        }
        
        .ans { 
            padding: 15px; 
            border-radius: 12px; 
            border: 2px solid #ddd; 
            font-size: 18px; 
            font-weight: bold; 
            cursor: pointer; 
            background: #fff;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .ans:hover {
            background: #f0f0f0;
            border-color: #4CAF50;
            transform: translateY(-2px);
        }

        .ans.correct {
            background: #d4edda;
            border-color: #28a745;
        }

        .ans.wrong {
            background: #f8d7da;
            border-color: #dc3545;
            animation: shake 0.5s;
        }

        .ans.hidden {
            opacity: 0.3;
            pointer-events: none;
        }

        .error-icon {
            margin-left: 8px;
            font-size: 20px;
            color: #dc3545;
        }
        
        .box { 
            text-align: left; 
            background: #e0f7fa; 
            padding: 18px; 
            border-radius: 15px; 
            border: 2px dashed #00bcd4; 
            font-size: 15px; 
            margin: 15px 0;
            line-height: 1.6;
        }
        
        .score {
            text-align: center;
            font-size: 20px;
            color: #4CAF50;
            font-weight: bold;
            margin: 15px 0;
        }

        .progress {
            text-align: center;
            color: #666;
            margin: 15px 0;
            font-size: 18px;
        }

        .theory-content {
            text-align: left;
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            line-height: 1.8;
            max-height: 500px;
            overflow-y: auto;
        }

        .theory-content table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            background: white;
        }

        .theory-content th, .theory-content td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: left;
        }

        .theory-content th {
            background: #6c5ce7;
            color: white;
        }

        .ending {
            color: #FF0000;
            font-weight: bold;
        }

        .result {
            text-align: center;
            padding: 30px;
            background: #f8f9fa;
            border-radius: 15px;
            margin: 20px 0;
        }

        .result h2 {
            margin-bottom: 20px;
            color: #4CAF50;
            font-size: 32px;
        }

        .qr-section {
            margin: 25px 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
        }

        .qr-code {
            width: 250px;
            height: 250px;
            margin: 15px auto;
            background: white;
            padding: 10px;
            border-radius: 15px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
        }

        .qr-code img {
            width: 100%;
            height: 100%;
            border-radius: 10px;
        }

        .telegram-handle {
            color: white;
            font-size: 22px;
            font-weight: bold;
            margin: 10px 0;
        }
        
        @media (max-width: 768px) {
            #app { padding: 20px; }
            h1 { font-size: 22px; }
            .question-text { font-size: 20px; }
            .options { grid-template-columns: 1fr; }
            .qr-code { width: 200px; height: 200px; }
        }
    </style>
</head>
<body>
<div id="app">
    <!-- –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ -->
    <div id="s0" class="screen active">
        <h1>üéÅ DEMO: –¢—Ä–µ–Ω–∞–∂—ë—Ä-—Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä –†–ö–ò<br>–°–ø—Ä—è–∂–µ–Ω–∏–µ –≥–ª–∞–≥–æ–ª–æ–≤</h1>
        <p style="margin: 15px 0; font-size: 16px; color: #ff6347; font-weight: bold;">‚ö†Ô∏è –î–ï–ú–û-–í–ï–†–°–ò–Ø: –¢–æ–ª—å–∫–æ 4 –≤–æ–ø—Ä–æ—Å–∞ (—É—Ä–æ–≤–µ–Ω—å A1)</p>
        
        <button class="btn b-green" onclick="startDemo()" style="font-size: 1.3rem; padding: 20px 40px; margin: 30px 0;">üéÆ –ü–û–ü–†–û–ë–û–í–ê–¢–¨ –ë–ï–°–ü–õ–ê–¢–ù–û</button>

        <div class="qr-section">
            <div class="qr-code">
                <img src="/mnt/user-data/uploads/1767162529558_image.png" alt="QR Telegram" />
            </div>
            <div class="telegram-handle">@BAXTIYOR_XAMIDOV</div>
            <a href="https://t.me/Baxtiyor_Xamidov" class="btn b-uz" target="_blank" style="margin-top: 10px;">üì± –ù–ê–ü–ò–°–ê–¢–¨ –í TELEGRAM</a>
        </div>
        
        <div class="author-info">
            –ê–≤—Ç–æ—Ä-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫: –ë–∞—Ö—Ç–∏—è—Ä –•–∞–º–∏–¥–æ–≤, —É—á–∏—Ç–µ–ª—å –†–ö–ò, –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω ¬© 2025
        </div>
    </div>

    <!-- –¢–ï–û–†–ò–Ø RU -->
    <div id="theory-ru" class="screen">
        <div class="theory-content">
            <h2>–ì–ª–∞–≥–æ–ª—å–Ω–æ–µ —Å–ø—Ä—è–∂–µ–Ω–∏–µ –≤ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ</h2>
            
            <h3>1. –ß—Ç–æ —Ç–∞–∫–æ–µ —Å–ø—Ä—è–∂–µ–Ω–∏–µ?</h3>
            <p>–°–ø—Ä—è–∂–µ–Ω–∏–µ ‚Äî —ç—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≥–ª–∞–≥–æ–ª–∞ –ø–æ –ª–∏—Ü–∞–º –∏ —á–∏—Å–ª–∞–º. –í —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ –¥–≤–∞ —Å–ø—Ä—è–∂–µ–Ω–∏—è: I –∏ II.</p>
            
            <h3>2. I —Å–ø—Ä—è–∂–µ–Ω–∏–µ</h3>
            <p>–õ–∏—á–Ω—ã–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è I —Å–ø—Ä—è–∂–µ–Ω–∏—è:</p>
            <table>
                <tr><th>–õ–∏—Ü–æ</th><th>–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ</th><th>–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ</th></tr>
                <tr><td>1-–µ (—è, –º—ã)</td><td>-—É/-<span class="ending">—é</span></td><td>-<span class="ending">–µ–º</span></td></tr>
                <tr><td>2-–µ (—Ç—ã, –≤—ã)</td><td>-<span class="ending">–µ—à—å</span></td><td>-<span class="ending">–µ—Ç–µ</span></td></tr>
                <tr><td>3-–µ (–æ–Ω/–æ–Ω–∞, –æ–Ω–∏)</td><td>-<span class="ending">–µ—Ç</span></td><td>-<span class="ending">—É—Ç</span>/-<span class="ending">—é—Ç</span></td></tr>
            </table>
            <p><strong>–ü—Ä–∏–º–µ—Ä—ã:</strong> —á–∏—Ç–∞—Ç—å ‚Üí —è —á–∏—Ç–∞<span class="ending">—é</span>, —Ç—ã —á–∏—Ç–∞<span class="ending">–µ—à—å</span>, –æ–Ω —á–∏—Ç–∞<span class="ending">–µ—Ç</span></p>
            
            <h3>3. II —Å–ø—Ä—è–∂–µ–Ω–∏–µ</h3>
            <table>
                <tr><th>–õ–∏—Ü–æ</th><th>–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ</th><th>–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ</th></tr>
                <tr><td>1-–µ (—è, –º—ã)</td><td>-—É/-<span class="ending">—é</span></td><td>-<span class="ending">–∏–º</span></td></tr>
                <tr><td>2-–µ (—Ç—ã, –≤—ã)</td><td>-<span class="ending">–∏—à—å</span></td><td>-<span class="ending">–∏—Ç–µ</span></td></tr>
                <tr><td>3-–µ (–æ–Ω/–æ–Ω–∞, –æ–Ω–∏)</td><td>-<span class="ending">–∏—Ç</span></td><td>-<span class="ending">–∞—Ç</span>/-<span class="ending">—è—Ç</span></td></tr>
            </table>
            <p><strong>–ü—Ä–∏–º–µ—Ä—ã:</strong> –≥–æ–≤–æ—Ä–∏—Ç—å ‚Üí —è –≥–æ–≤–æ—Ä<span class="ending">—é</span>, —Ç—ã –≥–æ–≤–æ—Ä<span class="ending">–∏—à—å</span>, –æ–Ω –≥–æ–≤–æ—Ä<span class="ending">–∏—Ç</span></p>
            
            <h3>4. –ì–ª–∞–≥–æ–ª—ã-–∏—Å–∫–ª—é—á–µ–Ω–∏—è II —Å–ø—Ä—è–∂–µ–Ω–∏—è</h3>
            <p>–≥–Ω–∞—Ç—å, –¥–µ—Ä–∂–∞—Ç—å, —Å–ª—ã—à–∞—Ç—å, –¥—ã—à–∞—Ç—å, —Å–º–æ—Ç—Ä–µ—Ç—å, –≤–∏–¥–µ—Ç—å, –Ω–µ–Ω–∞–≤–∏–¥–µ—Ç—å, –æ–±–∏–¥–µ—Ç—å, —Ç–µ—Ä–ø–µ—Ç—å, –∑–∞–≤–∏—Å–µ—Ç—å, –≤–µ—Ä—Ç–µ—Ç—å</p>
            
            <h3>5. –ß–µ—Ä–µ–¥–æ–≤–∞–Ω–∏—è —Å–æ–≥–ª–∞—Å–Ω—ã—Ö</h3>
            <ul>
                <li>–∫ ‚Üí —á: –ø–µ–∫—É ‚Üí –ø–µ—á–µ<span class="ending">—à—å</span></li>
                <li>–≥ ‚Üí –∂: –±–µ—Ä–µ–≥—É ‚Üí –±–µ—Ä–µ–∂–µ<span class="ending">—à—å</span></li>
                <li>—Å ‚Üí —à: –Ω–æ—Å–∏—Ç—å ‚Üí –Ω–æ—à—É</li>
                <li>—Ç ‚Üí —á: –ø–ª–∞—Ç–∏—Ç—å ‚Üí –ø–ª–∞—á—É</li>
                <li>—Å—Ç ‚Üí —â: —á–∏—Å—Ç–∏—Ç—å ‚Üí —á–∏—â—É</li>
            </ul>
        </div>
        <button class="btn b-main" onclick="backToMenu()">‚Üê –ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é</button>
    </div>

    <!-- –¢–ï–û–†–ò–Ø UZ -->
    <div id="theory-uz" class="screen">
        <div class="theory-content">
            <h2>Rus tilida fe'llarning shaxs-son bo'yicha o'zgarishi</h2>
            
            <h3>1. Tuslanish (—Å–ø—Ä—è–∂–µ–Ω–∏–µ) nima?</h3>
            <p>Tuslanish ‚Äî fe'lning shaxs va son bo'yicha o'zgarishi. Rus tilida ikki tuslanish bor: I va II.</p>
            
            <h3>2. I tuslanish</h3>
            <table>
                <tr><th>Shaxs</th><th>Birlik</th><th>Ko'plik</th></tr>
                <tr><td>1-shaxs (men, biz)</td><td>-—É/-<span class="ending">—é</span></td><td>-<span class="ending">–µ–º</span></td></tr>
                <tr><td>2-shaxs (sen, siz)</td><td>-<span class="ending">–µ—à—å</span></td><td>-<span class="ending">–µ—Ç–µ</span></td></tr>
                <tr><td>3-shaxs (u, ular)</td><td>-<span class="ending">–µ—Ç</span></td><td>-<span class="ending">—É—Ç</span>/-<span class="ending">—é—Ç</span></td></tr>
            </table>
            <p><strong>Misollar:</strong> —á–∏—Ç–∞—Ç—å (o'qimoq) ‚Üí —è —á–∏—Ç–∞<span class="ending">—é</span>, —Ç—ã —á–∏—Ç–∞<span class="ending">–µ—à—å</span></p>
            
            <h3>3. II tuslanish</h3>
            <table>
                <tr><th>Shaxs</th><th>Birlik</th><th>Ko'plik</th></tr>
                <tr><td>1-shaxs (men, biz)</td><td>-—É/-<span class="ending">—é</span></td><td>-<span class="ending">–∏–º</span></td></tr>
                <tr><td>2-shaxs (sen, siz)</td><td>-<span class="ending">–∏—à—å</span></td><td>-<span class="ending">–∏—Ç–µ</span></td></tr>
                <tr><td>3-shaxs (u, ular)</td><td>-<span class="ending">–∏—Ç</span></td><td>-<span class="ending">–∞—Ç</span>/-<span class="ending">—è—Ç</span></td></tr>
            </table>
            
            <h3>4. Undoshlar almashishi</h3>
            <ul>
                <li>–∫ ‚Üí —á: –ø–µ–∫—É ‚Üí –ø–µ—á—ë—à—å</li>
                <li>–≥ ‚Üí –∂: –±–µ—Ä–µ–≥—É ‚Üí –±–µ—Ä–µ–∂—ë—à—å</li>
                <li>—Å ‚Üí —à: –Ω–æ—Å–∏—Ç—å ‚Üí –Ω–æ—à—É</li>
            </ul>
        </div>
        <button class="btn b-main" onclick="backToMenu()">‚Üê Menyuga qaytish</button>
    </div>

    <!-- –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï -->
    <div id="s2" class="screen">
        <div class="score">–ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤: <span id="score">0</span> –∏–∑ <span id="total">20</span> (<span id="percentage">0</span>%)</div>
        <div class="progress">–í–æ–ø—Ä–æ—Å <span id="current">1</span> –∏–∑ <span id="total-q">20</span></div>
        
        <div class="question-text">
            <span id="text-before"></span>
            <span class="blank-space" id="blank"></span>
            <span id="text-after"></span>
        </div>
        
        <div class="options" id="opts"></div>
        
        <button class="btn b-main" onclick="backToMenu()" style="margin-top: 20px;">‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –º–µ–Ω—é</button>
    </div>

    <!-- –§–ò–ù–ê–õ–¨–ù–´–ô –≠–ö–†–ê–ù -->
    <div id="s3" class="screen">
        <div class="result">
            <h2 id="result-title"></h2>
            <p style="font-size: 20px;">–£—Ä–æ–≤–µ–Ω—å: <strong id="result-level"></strong></p>
            <p style="font-size: 20px; margin: 10px 0;">–ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤: <strong id="result-score"></strong> –∏–∑ <strong id="result-total"></strong></p>
            <p style="font-size: 32px; margin: 20px 0; color: #4CAF50;"><strong id="result-percent"></strong></p>
        </div>
        
        <h3 style="color:#20bf6b; margin-top: 30px;">üéâ –ü–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å?</h3>
        <p style="font-size: 18px; margin: 15px 0;">–≠—Ç–æ –±—ã–ª–∞ —Å–æ–∫—Ä–∞—â–µ–Ω–Ω–∞—è <b style="color: #ff6347;">DEMO-–≤–µ—Ä—Å–∏—è</b> (4 –≤–æ–ø—Ä–æ—Å–∞).</p>
        <p style="font-size: 16px; color: #666; margin: 10px 0;">–ü–æ–ª–Ω–∞—è –≤–µ—Ä—Å–∏—è —Å–æ–¥–µ—Ä–∂–∏—Ç <b>80 –≤–æ–ø—Ä–æ—Å–æ–≤</b> (4 —É—Ä–æ–≤–Ω—è: A1, A2, B1, B2) + –ø–æ–¥—Ä–æ–±–Ω–∞—è —Ç–µ–æ—Ä–∏—è –Ω–∞ RU/UZ!</p>
        
        <div class="box">
            <b>–î–õ–Ø –ó–ê–ö–ê–ó–ê –ü–û–õ–ù–û–ô –í–ï–†–°–ò–ò:</b><br><br>
            üì± Telegram: @Baxtiyor_Xamidov<br>
            ‚òéÔ∏è –¢–µ–ª–µ—Ñ–æ–Ω: +998 91 500 50 92<br><br>
            üí≥ Uzcard (Xamidov Baxtiyar):<br>5614 6838 6184 6202<br><br>
            üí∞ <b>–¶–µ–Ω–∞: 20 000 —Å—É–º</b>
        </div>

        <div class="qr-section">
            <div class="qr-code">
                <img src="/mnt/user-data/uploads/1767162529558_image.png" alt="QR Telegram" />
            </div>
            <div class="telegram-handle">@BAXTIYOR_XAMIDOV</div>
        </div>
        
        <a href="https://t.me/Baxtiyor_Xamidov" class="btn b-uz" target="_blank">üì± –ó–ê–ö–ê–ó–ê–¢–¨ –ü–û–õ–ù–£–Æ –í–ï–†–°–ò–Æ</a>
        <button class="btn b-green" onclick="location.reload()">üîÑ –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –µ—â—ë —Ä–∞–∑</button>
    </div>
</div>

<script>
    // –ë–∞–∑–∞ –≤–æ–ø—Ä–æ—Å–æ–≤ DEMO (—Ç–æ–ª—å–∫–æ 4 –≤–æ–ø—Ä–æ—Å–∞ A1)
    const questionsDB = {
        DEMO: [
            {text: ["–Ø", "–∫–Ω–∏–≥–∏."], options: ["—á–∏—Ç–∞–µ–º", "—á–∏—Ç–∞–µ—à—å", "—á–∏—Ç–∞—é", "—á–∏—Ç–∞—é—Ç"], correct: 2, stem: "—á–∏—Ç–∞", ending: "—é"},
            {text: ["–¢—ã", "–¥–æ–º–æ–π."], options: ["–∏–¥—É", "–∏–¥—ë—à—å", "–∏–¥—ë—Ç", "–∏–¥—É—Ç"], correct: 1, stem: "–∏–¥", ending: "—ë—à—å"},
            {text: ["–û–Ω", "–≤ —à–∫–æ–ª—É."], options: ["—Ö–æ–∂—É", "—Ö–æ–¥–∏—à—å", "—Ö–æ–¥–∏—Ç", "—Ö–æ–¥—è—Ç"], correct: 2, stem: "—Ö–æ–¥", ending: "–∏—Ç"},
            {text: ["–û–Ω–∞", "–º—É–∑—ã–∫—É."], options: ["—Å–ª—É—à–∞—é", "—Å–ª—É—à–∞–µ—à—å", "—Å–ª—É—à–∞–µ—Ç", "—Å–ª—É—à–∞—é—Ç"], correct: 2, stem: "—Å–ª—É—à–∞", ending: "–µ—Ç"}
        ]
    };

    let currentLevel = '';
    let currentQuestionIndex = 0;
    let correctAnswers = 0;
    let answered = false;
    let currentQuestions = [];

    function switchScreen(id) {
        document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
        document.getElementById(id).classList.add('active');
    }

    function showTheory(lang) {
        switchScreen('theory-' + lang);
    }

    function backToMenu() {
        switchScreen('s0');
    }

    function startDemo() {
        currentLevel = 'DEMO';
        currentQuestions = questionsDB['DEMO'];
        currentQuestionIndex = 0;
        correctAnswers = 0;
        
        switchScreen('s2');
        document.getElementById('total').textContent = currentQuestions.length;
        document.getElementById('total-q').textContent = currentQuestions.length;
        
        updateScore();
        displayQuestion();
    }

    function startLevel(level) {
        startDemo(); // –í DEMO –≤—Å–µ–≥–¥–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è DEMO
    }

    function displayQuestion() {
        answered = false;
        const q = currentQuestions[currentQuestionIndex];
        
        document.getElementById('current').textContent = currentQuestionIndex + 1;
        document.getElementById('text-before').textContent = q.text[0];
        document.getElementById('text-after').textContent = q.text[1];
        document.getElementById('blank').innerHTML = '';
        document.getElementById('blank').style.border = '2px solid #E0E0E0';
        
        const optsDiv = document.getElementById('opts');
        optsDiv.innerHTML = '';
        
        q.options.forEach((option, index) => {
            const btn = document.createElement('button');
            btn.className = 'ans';
            btn.textContent = option;
            btn.onclick = () => checkAnswer(index);
            optsDiv.appendChild(btn);
        });
    }

    function checkAnswer(selectedIndex) {
        if (answered) return;
        
        answered = true;
        const q = currentQuestions[currentQuestionIndex];
        const buttons = document.querySelectorAll('.ans');
        
        if (selectedIndex === q.correct) {
            correctAnswers++;
            updateScore();
            buttons[selectedIndex].classList.add('correct');
            
            setTimeout(() => {
                const blank = document.getElementById('blank');
                blank.innerHTML = `
                    <span class="answer-content">
                        <span class="verb-stem">${q.stem}</span><span class="verb-ending">${q.ending}<span class="checkmark">‚úÖ</span></span><span class="star">‚≠ê</span>
                    </span>
                `;
                blank.style.border = '2px solid #4CAF50';
            }, 300);
            
            buttons.forEach((btn, idx) => {
                if (idx !== selectedIndex) {
                    btn.classList.add('hidden');
                }
            });
            
            setTimeout(() => {
                currentQuestionIndex++;
                if (currentQuestionIndex < currentQuestions.length) {
                    displayQuestion();
                } else {
                    showResults();
                }
            }, 2000);
        } else {
            buttons[selectedIndex].classList.add('wrong');
            buttons[selectedIndex].innerHTML += '<span class="error-icon">‚ùì</span>';
            
            setTimeout(() => {
                buttons[selectedIndex].classList.remove('wrong');
                const errorIcon = buttons[selectedIndex].querySelector('.error-icon');
                if (errorIcon) errorIcon.remove();
                answered = false;
            }, 1000);
        }
    }

    function updateScore() {
        const percentage = Math.round((correctAnswers / currentQuestions.length) * 100);
        document.getElementById('score').textContent = correctAnswers;
        document.getElementById('percentage').textContent = percentage;
    }

    function showResults() {
        const percentage = Math.round((correctAnswers / currentQuestions.length) * 100);
        let grade = '';
        let emoji = '';
        
        if (percentage >= 90) {
            grade = '–û—Ç–ª–∏—á–Ω–æ!';
            emoji = '‚≠ê‚≠ê‚≠ê';
        } else if (percentage >= 75) {
            grade = '–•–æ—Ä–æ—à–æ!';
            emoji = '‚≠ê‚≠ê';
        } else if (percentage >= 60) {
            grade = '–£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ';
            emoji = '‚≠ê';
        } else {
            grade = '–ù—É–∂–Ω–æ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª';
            emoji = 'üìö';
        }

        document.getElementById('result-title').textContent = grade + ' ' + emoji;
        document.getElementById('result-level').textContent = currentLevel;
        document.getElementById('result-score').textContent = correctAnswers;
        document.getElementById('result-total').textContent = currentQuestions.length;
        document.getElementById('result-percent').textContent = percentage + '%';
        
        switchScreen('s3');
    }

    function restartLevel() {
        startLevel(currentLevel);
    }
</script>
</body>
</html>
